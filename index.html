<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EarnHub AI | Neural Network Earning</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>

    <style>
        :root {
            --ai-neon: #00f2ff;
            --ai-purple: #7000ff;
            --ai-bg: #050510;
            --glass: rgba(255, 255, 255, 0.03);
            --neon-shadow: 0 0 15px rgba(0, 242, 255, 0.4);
        }

        * { box-sizing: border-box; font-family: 'Rajdhani', sans-serif; }
        body { background: var(--ai-bg); margin: 0; color: #e0e0e0; overflow-x: hidden; min-height: 100vh; }

        /* AI Background Effects */
        .bg-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, rgba(112, 0, 255, 0.1) 0%, transparent 80%);
            pointer-events: none; z-index: -1;
        }

        .container { width: 100%; max-width: 450px; margin: auto; padding: 20px; }

        /* AI Glass Card */
        .ai-card {
            background: var(--glass);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(0, 242, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: var(--neon-shadow);
            margin-bottom: 20px;
            position: relative;
        }

        h1 { font-family: 'Orbitron', sans-serif; color: var(--ai-neon); text-shadow: var(--neon-shadow); font-size: 28px; margin: 10px 0; }

        /* Inputs & Buttons */
        input, select {
            width: 100%; padding: 12px; background: rgba(0,0,0,0.4);
            border: 1px solid var(--ai-purple); color: #fff; border-radius: 5px;
            margin-bottom: 15px; text-align: center; outline: none;
        }

        .ai-btn {
            width: 100%; padding: 15px; background: transparent;
            border: 2px solid var(--ai-neon); color: var(--ai-neon);
            font-family: 'Orbitron', sans-serif; font-weight: bold;
            cursor: pointer; transition: 0.3s;
            clip-path: polygon(10% 0, 100% 0, 90% 100%, 0% 100%);
        }

        .ai-btn:hover { background: var(--ai-neon); color: #000; box-shadow: 0 0 20px var(--ai-neon); }

        /* Captcha Display */
        .captcha-box {
            font-family: 'Orbitron', sans-serif; font-size: 38px; color: #fff;
            background: rgba(0,0,0,0.6); padding: 15px; border-radius: 10px;
            border: 1px dashed var(--ai-neon); margin: 15px 0; letter-spacing: 8px;
        }

        /* Status Badges */
        .history-item {
            background: rgba(255,255,255,0.05); padding: 15px;
            border-radius: 10px; margin-bottom: 10px; border-left: 4px solid var(--ai-purple);
            text-align: left; font-size: 14px;
        }

        .status-paid { color: #2ecc71; font-weight: bold; }
        .status-wait { color: #f1c40f; font-weight: bold; }

        #loginScreen, #mainApp, #historyScreen, #withdrawScreen { display: none; }
    </style>
</head>
<body>

<div class="bg-overlay"></div>

<div class="container">
    
    <div id="loginScreen" style="display: block; text-align: center; padding-top: 50px;">
        <div style="font-size: 60px; filter: drop-shadow(0 0 10px var(--ai-neon));">üåÄ</div>
        <h1>EARNHUB AI</h1>
        <p style="color: var(--ai-purple); letter-spacing: 2px; margin-bottom: 40px;">NEURAL NETWORK INTERFACE</p>
        
        <div class="ai-card">
            <p style="font-size: 14px; margin-bottom: 20px;">‡∂¥‡∂Ø‡∑ä‡∂∞‡∂≠‡∑í‡∂∫‡∂ß ‡∂á‡∂≠‡∑î‡∑Ö‡∑î ‡∑Ä‡∑ì‡∂∏‡∂ß ‡∂î‡∂∂‡∂ú‡∑ö Google ‡∂ú‡∑í‡∂´‡∑î‡∂∏ ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</p>
            <button class="ai-btn" onclick="signIn()">Authorize Access</button>
        </div>
    </div>

    <div id="mainApp">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="font-family: 'Orbitron'; font-size: 18px; color: var(--ai-neon);">CORE_DASHBOARD</h2>
            <button onclick="signOut()" style="background:none; border:none; color:red; cursor:pointer;">LOGOUT</button>
        </div>

        <div class="ai-card">
            <div style="display: flex; justify-content: space-between; font-size: 14px;">
                <span id="uName">USER: ---</span>
                <span id="uPoints" style="color: var(--ai-neon); font-weight: bold;">0 CP</span>
            </div>
        </div>

        <div class="ai-card">
            <small style="color: var(--ai-purple);">DATA VERIFICATION REQUIRED</small>
            <div class="captcha-box" id="captchaBox">----</div>
            <input type="number" id="userInput" placeholder="ACCESS CODE">
            <button class="ai-btn" onclick="handleTask()">Execute Task</button>
        </div>

        <button class="ai-btn" style="border-color: var(--ai-purple); color: var(--ai-purple); margin-bottom: 10px;" onclick="switchScreen('withdrawScreen')">Request Payout</button>
        <button class="ai-btn" style="border-color: #555; color: #888;" onclick="switchScreen('historyScreen')">Transaction History</button>
    </div>

    <div id="withdrawScreen">
        <h1>WITHDRAWAL</h1>
        <div class="ai-card">
            <select id="payMethod">
                <option value="EzCash">EzCash / mCash</option>
                <option value="Reload">Mobile Reload</option>
                <option value="Bank">Bank Transfer</option>
            </select>
            <input type="text" id="payDetails" placeholder="Phone or Account Number">
            <button class="ai-btn" onclick="submitWithdraw()">Confirm Withdrawal</button>
            <p onclick="switchScreen('mainApp')" style="margin-top:15px; cursor:pointer; font-size:12px;">BACK TO TERMINAL</p>
        </div>
    </div>

    <div id="historyScreen">
        <h1>HISTORY</h1>
        <div id="historyList"></div>
        <button class="ai-btn" onclick="switchScreen('mainApp')">RETURN</button>
    </div>

</div>

<script>
    // FIREBASE CONFIG
    const firebaseConfig = {
        apiKey: "AIzaSyCBW21NQG7100ZQ_phXtVPiY-IWRzNCGu0",
        authDomain: "earn-money-600d9.firebaseapp.com",
        databaseURL: "https://earn-money-600d9-default-rtdb.firebaseio.com",
        projectId: "earn-money-600d9",
        storageBucket: "earn-money-600d9.firebasestorage.app",
        messagingSenderId: "12987052490",
        appId: "1:12987052490:web:4b349f2ad5a1812d9adf33"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const auth = firebase.auth();
    const provider = new firebase.auth.GoogleAuthProvider();

    let currentUID, currentPoints, uName, captchaCode;

    // SCREEN SWITCHER
    function switchScreen(id) {
        ['loginScreen', 'mainApp', 'historyScreen', 'withdrawScreen'].forEach(s => document.getElementById(s).style.display = 'none');
        document.getElementById(id).style.display = 'block';
        if(id === 'historyScreen') loadHistory();
    }

    // AUTH
    function signIn() { auth.signInWithPopup(provider); }
    function signOut() { auth.signOut(); location.reload(); }

    auth.onAuthStateChanged(user => {
        if (user) {
            currentUID = user.uid;
            uName = user.displayName;
            document.getElementById("uName").innerText = "OPERATOR: " + uName.toUpperCase();
            switchScreen('mainApp');
            syncData();
            genCaptcha();
        }
    });

    function syncData() {
        db.ref('users/' + currentUID + '/points').on('value', s => {
            currentPoints = s.val() || 0;
            document.getElementById("uPoints").innerText = currentPoints + " CP";
        });
    }

    // CAPTCHA TASK
    function genCaptcha() {
        captchaCode = Math.floor(1000 + Math.random() * 9000);
        document.getElementById("captchaBox").innerText = captchaCode;
    }

    async function handleTask() {
        const input = document.getElementById("userInput").value;
        if(input == captchaCode) {
            window.open('https://www.effectivegatecpm.com/bfifb4kf8?key=4848fcef5dd96ae01528e28c2c90fd4f', '_blank');
            await db.ref('users/' + currentUID + '/points').transaction(p => (p || 0) + 10);
            document.getElementById("userInput").value = "";
            genCaptcha();
        } else { alert("ACCESS DENIED: Invalid Code"); }
    }

    // WITHDRAW
    async function submitWithdraw() {
        const method = document.getElementById("payMethod").value;
        const details = document.getElementById("payDetails").value;
        if(currentPoints < 500) return alert("MINIMUM 500 CP REQUIRED");
        if(!details) return alert("ENTER DETAILS");

        const newReq = {
            uid: currentUID,
            name: uName,
            points: currentPoints,
            method: method,
            details: details,
            date: new Date().toLocaleString(),
            status: "Processing"
        };

        await db.ref('requests').push(newReq);
        alert("REQUEST SENT TO NEURAL CORE");
        switchScreen('mainApp');
    }

    // HISTORY (Status: Paid update)
    async function loadHistory() {
        const listDiv = document.getElementById("historyList");
        listDiv.innerHTML = "SCANNING DATABASE...";
        const snap = await db.ref('requests').orderByChild('uid').equalTo(currentUID).once('value');
        
        listDiv.innerHTML = "";
        if(snap.exists()) {
            snap.forEach(child => {
                const r = child.val();
                const statusHtml = r.status === "Paid" ? 
                    '<span class="status-paid">PAID ‚úÖ</span>' : 
                    '<span class="status-wait">PROCESSING...</span>';
                
                listDiv.innerHTML += `
                    <div class="history-item">
                        <small>${r.date}</small><br>
                        <strong>${r.points} CP via ${r.method}</strong><br>
                        ${statusHtml}
                    </div>`;
            });
        } else { listDiv.innerHTML = "NO TRANSACTIONS FOUND"; }
    }
</script>

</body>
</html>
